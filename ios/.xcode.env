# Script to initialize Node Version Manager (NVM) in the shell session.

# Check if NVM is already sourced to prevent duplicate execution.
if [ -z "${NVM_DIR}" ]; then
  
  # 1. Check for standard NVM installation path in the HOME directory.
  if [[ -s "$HOME/.nvm/nvm.sh" ]]; then
    
    # Load NVM from the standard installation path.
    . "$HOME/.nvm/nvm.sh"

  # 2. Check for Homebrew installation path, if the 'brew' command is executable.
  elif [[ -x "$(command -v brew)" ]]; then
    
    # Get the Homebrew prefix for NVM once.
    NVM_BREW_PREFIX="$(brew --prefix nvm)"
    
    if [[ -s "${NVM_BREW_PREFIX}/nvm.sh" ]]; then
      
      # Load NVM from the Homebrew path.
      . "${NVM_BREW_PREFIX}/nvm.sh"

    fi
  fi
fi

# Optional: Add the lines below to enable nvm auto-completion if desired.
# if [[ -s "$NVM_DIR/bash_completion" ]]; then
#   . "$NVM_DIR/bash_completion"
# fi

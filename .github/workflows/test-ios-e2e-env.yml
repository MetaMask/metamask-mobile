name: Test iOS E2E Setup

on:
  push:


jobs:
  ios-e2e:
    #runs-on: macos-14


    
    runs-on: macos-14-large
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Print system resources
        run: |
            echo "üß† Memory info:"
            vm_stat

            echo ""
            echo "üíª CPU info:"
            sysctl -n hw.ncpu
            sysctl -n hw.memsize | awk '{ byte =$1 /1024/1024/1024; print byte " GB" }'
        shell: bash


      - name: Setup E2E iOS Environment
        uses: MetaMask/github-tools/.github/actions/setup-e2e-env@e2e-env-actions
        with:
          platform: ios
          setup-simulator: true

      - name: Print iOS tool versions
        run: |
            echo "üîß Node.js Version:"
            node -v || echo "Node not found"

            echo "üß∂ Yarn Version:"
            yarn -v || echo "Yarn not found"

            echo "üì¶ CocoaPods Version:"
            pod --version || echo "CocoaPods not found"

            echo "üõ†Ô∏è Xcode Path:"
            xcode-select -p || echo "Xcode not found"

            echo "üì± Booted iOS Simulators:"
            xcrun simctl list | grep Booted || echo "No booted simulators found"
        shell: bash



